# Kylmätekniikkapeli / versio ties kuinka mones

Selainpohjainen tietovisapeli, joka on suunniteltu käytettäväksi tabletilla (erityisesti iPadilla) messu- ja esittelytilanteissa. Sovellus toimii suoraan selaimessa ilman erillistä asennusta ja julkaistaan GitHub Pagesin kautta.

## Ominaisuudet

- **Kysymyspankit**: 15 kysymystä jaettuna kolmeen vaikeustasoon (lämmittely, keskitaso, haaste)
- **Ajanhallinta**: 20 sekunnin vastausaika kysymystä kohden visuaalisella ajastinpalkilla
- **Pistemäärä**: Pisteitä kertyy nopeudesta riippuen (maksimi 400 pistettä)
- **Virtuaalinäppäimistö**: Oma näppäimistö, joka ei laukaise laitteen omaa näppäimistöä
- **Supabase-integraatio**: Tulosten tallennus ja Top 5 -tuloslista
- **Kosketusoptimoitu**: Suunniteltu erityisesti iPad-käyttöön messuympäristössä
- **Turva-alue**: Käyttöliittymä rajattu 70 %:iin näytön pinta-alasta

## Tiedostorakenne

```
kylmatekniikkapeli/
├── index.html          # Pääasiallinen HTML-rakenne
├── styles.css          # Tyylit ja käyttöliittymän ulkoasu
├── app.js              # Pääsovelluslogiikka
├── questions.js        # Kysymyspankit
├── keyboard.js         # Virtuaalinäppäimistö
├── supabase.js         # Supabase-integraatio
└── README.md           # Tämä dokumentaatio
```

## Asennus ja käyttöönotto

### 1. Kloonaa tai lataa projektit

```bash
git clone https://github.com/your-username/kylmatekniikkapeli.git
cd kylmatekniikkapeli
```

### 2. Supabase-tietokannan käyttöönotto

Sovellus käyttää Supabase-palvelua tulosten tallentamiseen. Seuraa näitä ohjeita:

#### 2.1 Luo Supabase-projekti

1. Siirry osoitteeseen [supabase.com](https://supabase.com)
2. Luo uusi projekti ilmaiseksi
3. Kopioi projektin URL ja anon-key

#### 2.2 Luo tietokantataulukko

Siirry Supabase-konsolin SQL-editoriin ja suorita seuraava SQL:

```sql
-- Luo leaderboard-taulukko
CREATE TABLE IF NOT EXISTS leaderboard (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    player_name TEXT NOT NULL,
    phone TEXT,
    score INTEGER NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW()) NOT NULL
);

-- Luo indeksi nopeampia hakuja varten
CREATE INDEX IF NOT EXISTS idx_leaderboard_score 
ON leaderboard(score DESC);

-- Ota käyttöön RLS (Row Level Security)
ALTER TABLE leaderboard ENABLE ROW LEVEL SECURITY;

-- Anna insert-oikeudet anon-roolille (client)
CREATE POLICY "Allow anonymous inserts" ON leaderboard
    FOR INSERT WITH CHECK (true);

-- Anna select-oikeudet anon-roolille (client)
CREATE POLICY "Allow anonymous selects" ON leaderboard
    FOR SELECT USING (true);
```

#### 2.3 Konfiguroi sovellus

Avaa `supabase.js` ja korvaa konfiguraatioarvot omillasi:

```javascript
const SUPABASE_CONFIG = {
    url: 'https://your-project-id.supabase.co',
    anonKey: 'your-anon-key-here',
    tableName: 'leaderboard'
};
```

### 3. Kysymysten muokkaaminen

Kysymykset sijaitsevat tiedostossa `questions.js`. Voit muokata kysymyksiä seuraavasti:

```javascript
const easyQuestions = [
    {
        question: "Uusi kysymys?",
        answers: [
            "Vastaus A",
            "Vastaus B", 
            "Vastaus C",
            "Vastaus D"
        ],
        correctIndex: 0, // Oikea vastaus (0-3)
        explanation: "Selitys näytetään vastauksen jälkeen"
    },
    // Lisää kysymyksiä...
];
```

Kysymyksiä voi lisätä kolmeen eri pankkiin: `easyQuestions`, `mediumQuestions` ja `hardQuestions`. Peli valitsee automaattisesti 5 kysymystä kustakin pankista.

### 4. Julkaiseminen GitHub Pagesiin

#### 4.1 Luo GitHub-repositorio

1. Siirry GitHubiin ja luo uusi repositorio
2. Nimeä se esimerkiksi `kylmatekniikkapeli`
3. Älä lisää README-tiedostoa初始化essa vaiheessa

#### 4.2 Lataa tiedostot GitHubiin

```bash
git init
git add .
git commit -m "Ensimmäinen julkaisu"
git branch -M main
git remote add origin https://github.com/your-username/kylmatekniikkapeli.git
git push -u origin main
```

#### 4.3 Ota GitHub Pages käyttöön

1. Siirry repositorion asetuksiin (Settings)
2. Valitse vasemmanpuoleisesta valikosta "Pages"
3. Valitse Source: "Deploy from a branch"
4. Valitse Branch: "main" ja kansio: "/ (root)"
5. Klikkaa "Save"

Sovellus on nyt saatavilla osoitteessa: `https://your-username.github.io/kylmatekniikkapeli/`

## Käyttöliittymän rajoitukset

Sovellus on suunniteltu käytettäväksi tabletilla telineessä, joka peittää osan näytön reunoista. Tämän vuoksi käyttöliittymä on rajattu keskitetylle turva-alueelle, joka kattaa vain 70 % näytön pinta-alasta.

```
┌─────────────────────────────────────────────┐
│                                             │
│    ┌─────────────────────────────────┐      │
│    │                                 │      │
│    │   KÄYTTÖLIITTYMÄ (70% × 70%)   │      │
│    │                                 │      │
│    └─────────────────────────────────┘      │
│                                             │
│         NÄYTÖN REUNAT (30%)                 │
│         TARKOITUKSELLA TYHJIÄ               │
│                                             │
└─────────────────────────────────────────────┘
```

## Virtuaalinäppäimistö

Sovellus käyttää omaa virtuaalinäppäimistöä, joka:
- Ei laukaise iPadin tai selaimen omaa näppäimistöä
- Sisältää suomalaiset erikoismerkit (å, ä, ö)
- Toimii sekä teksti- että numerotilassa
- On optimoitu kosketuskäyttöön

## Tekniset yksityiskohdat

### Pistemäärän laskenta

Pistemäärä lasketaan seuraavasti:
- Maksimipistemäärä: 400 pistettä (teoreettinen)
- Per kysymys: Maksimi 27 pistettä
- Kaava: `Pisteet = (Jäljellä oleva aika / 20s) × 27`

### Selaimen tuki

Sovellus toimii seuraavissa selaimissa:
- Safari (iPad/iOS)
- Chrome
- Firefox
- Edge

### Responsiivisuus

Sovellus skaalautuu automaattisesti eri näyttökoille, mutta on optimoitu erityisesti iPad-näytöille (1024×768 ja suuremmat resoluutiot).

## Muokkaaminen

### Teeman muokkaaminen

Muokkaa `styles.css`-tiedoston värejä:

```css
:root {
    --primary-color: #0284c7;  /* Pääväri (sininen) */
    --success-color: #22c55e;  /* Oikein-väri */
    --error-color: #ef4444;    /* Väärin-väri */
    --background-color: #0f172a; /* Taustaväri */
}
```

### Peliasetusten muokkaaminen

Muokkaa `app.js`-tiedoston konfiguraatiota:

```javascript
const config = {
    questionsPerBank: 5,      // Kysymysten määrä per pankki
    timePerQuestion: 20,      // Sekuntia per kysymys
    maxScore: 400,            // Maksimipistemäärä
    transitionDelay: 1000,    // Siirtymäviive (ms)
    animationDelay: 1500      // Animaatioviive (ms)
};
```

## Lisenssi

Tämä projekti on lisensoitu MIT-lisenssin alla.

## Tuki

Ongelmien ilmetessä voit:
- Luoda uuden GitHub Issue -ticketin
- Tarkistaa konsolin virheilmoitukset (F12 → Console)
- Varmistaa Supabase-yhteyden toimivuuden
