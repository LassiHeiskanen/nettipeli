<!DOCTYPE html>
<html lang="fi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Kylm√§tekniikkapeli</title>
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <link rel="stylesheet" href="styles.css?v=6">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Safety zone container - 70% of screen -->
    <div id="safety-zone">
        <div id="app-container">
            
            <!-- Start Screen -->
            <section id="start-screen" class="screen active">
                <div class="logo-container">
                    <svg class="logo-icon" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="45" stroke="#0284c7" stroke-width="4"/>
                        <path d="M30 50 L45 35 L55 45 L70 30" stroke="#0284c7" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M30 60 L70 60" stroke="#0284c7" stroke-width="4" stroke-linecap="round"/>
                        <circle cx="35" cy="70" r="5" fill="#0284c7"/>
                        <circle cx="50" cy="70" r="5" fill="#0284c7"/>
                        <circle cx="65" cy="70" r="5" fill="#0284c7"/>
                    </svg>
                </div>
                <h1 class="game-title">Kylm√§tekniikkapeli</h1>
                <p class="game-subtitle">Testaa tietosi kylm√§tekniikasta!</p>
                <div class="game-info">
                    <div class="info-item">
                        <span class="info-icon">üìã</span>
                        <span>15 kysymyst√§</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">‚è±Ô∏è</span>
                        <span>20 sek / kysymys</span>
                    </div>
                    <div class="info-item">
                        <span class="info-icon">üèÜ</span>
                        <span>Maksimi 400 pistett√§</span>
                    </div>
                </div>
                <button id="start-btn" class="btn btn-primary btn-large">ALOITA PELI</button>
            </section>

            <!-- Quiz Screen -->
            <section id="quiz-screen" class="screen">
                <div class="quiz-header">
                    <div class="question-counter">
                        <span id="current-question">1</span>/15
                    </div>
                    <div class="score-display">
                        <span class="score-label">Pisteet:</span>
                        <span id="total-score">0</span>
                    </div>
                </div>
                
                <div class="timer-container">
                    <div id="timer-bar" class="timer-bar"></div>
                    <span id="timer-text" class="timer-text">20s</span>
                </div>

                <div class="question-container">
                    <h2 id="question-text" class="question-text">Kysymys tulee t√§h√§n...</h2>
                </div>

                <div id="answers-grid" class="answers-grid">
                    <button class="answer-btn" data-index="0">Vastaus A</button>
                    <button class="answer-btn" data-index="1">Vastaus B</button>
                    <button class="answer-btn" data-index="2">Vastaus C</button>
                    <button class="answer-btn" data-index="3">Vastaus D</button>
                </div>

                <div class="difficulty-indicator">
                    <span id="difficulty-badge" class="difficulty-badge easy">L√§mmittely</span>
                </div>
            </section>

            <!-- Results Input Screen -->
            <section id="results-input-screen" class="screen">
                <div class="results-header">
                    <h2 class="results-title">Pelisi on p√§√§ttynyt!</h2>
                    <div class="final-score">
                        <span class="final-score-label">Kokonaispistem√§√§r√§</span>
                        <span id="final-score-display" class="final-score-value">0</span>
                    </div>
                </div>

                <form id="player-form" class="player-form">
                    <div class="form-group">
                        <label for="player-name" class="form-label">Nimi *</label>
                        <div class="virtual-input-container">
                            <input type="text" id="player-name" class="virtual-input" placeholder="Sy√∂t√§ nimesi" readonly autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false">
                            <button type="button" class="input-trigger-btn" data-input="name">N√§yt√§ n√§pp√§imist√∂</button>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="player-phone" class="form-label">Puhelinnumero (valinnainen)</label>
                        <div class="virtual-input-container">
                            <input type="tel" id="player-phone" class="virtual-input" placeholder="Sy√∂t√§ puhelinnumero" readonly autocomplete="off">
                            <button type="button" class="input-trigger-btn" data-input="phone">N√§yt√§ n√§pp√§imist√∂</button>
                        </div>
                    </div>

                    <div class="form-buttons">
                        <button type="button" id="skip-btn" class="btn btn-secondary btn-large">OHITA</button>
                        <button type="submit" id="submit-score-btn" class="btn btn-primary btn-large" disabled>TALLENNA TULOS</button>
                    </div>
                </form>
            </section>

            <!-- Leaderboard Screen -->
            <section id="leaderboard-screen" class="screen">
                <h2 class="leaderboard-title">Top 5 - Tulokset</h2>
                
                <div class="leaderboard-container">
                    <div id="leaderboard-loading" class="loading-spinner"></div>
                    <table id="leaderboard-table" class="leaderboard-table">
                        <thead>
                            <tr>
                                <th>Sija</th>
                                <th>Nimi</th>
                                <th>Pisteet</th>
                            </tr>
                        </thead>
                        <tbody id="leaderboard-body">
                            <!-- Populated dynamically -->
                        </tbody>
                    </table>
                </div>

                <button id="restart-btn" class="btn btn-primary btn-large">ALOITA ALUSTA</button>
            </section>

        </div>
    </div>

    <!-- Virtual Keyboard Overlay -->
    <div id="keyboard-overlay" class="keyboard-overlay">
        <div id="keyboard-container" class="keyboard-container">
            <!-- Text Keyboard -->
            <div id="text-keyboard" class="keyboard text-keyboard">
                <div class="keyboard-row">
                    <button type="button" class="key" data-key="q" data-mode="text">q</button>
                    <button type="button" class="key" data-key="w" data-mode="text">w</button>
                    <button type="button" class="key" data-key="e" data-mode="text">e</button>
                    <button type="button" class="key" data-key="r" data-mode="text">r</button>
                    <button type="button" class="key" data-key="t" data-mode="text">t</button>
                    <button type="button" class="key" data-key="y" data-mode="text">y</button>
                    <button type="button" class="key" data-key="u" data-mode="text">u</button>
                    <button type="button" class="key" data-key="i" data-mode="text">i</button>
                    <button type="button" class="key" data-key="o" data-mode="text">o</button>
                    <button type="button" class="key" data-key="p" data-mode="text">p</button>
                    <button type="button" class="key key-wide key-backspace" data-key="backspace">‚å´</button>
                </div>
                <div class="keyboard-row">
                    <div class="spacer-half"></div>
                    <button type="button" class="key" data-key="a" data-mode="text">a</button>
                    <button type="button" class="key" data-key="s" data-mode="text">s</button>
                    <button type="button" class="key" data-key="d" data-mode="text">d</button>
                    <button type="button" class="key" data-key="f" data-mode="text">f</button>
                    <button type="button" class="key" data-key="g" data-mode="text">g</button>
                    <button type="button" class="key" data-key="h" data-mode="text">h</button>
                    <button type="button" class="key" data-key="j" data-mode="text">j</button>
                    <button type="button" class="key" data-key="k" data-mode="text">k</button>
                    <button type="button" class="key" data-key="l" data-mode="text">l</button>
                    <div class="spacer-half"></div>
                </div>
                <div class="keyboard-row">
                    <button type="button" class="key key-wide" data-key="caps">‚áß</button>
                    <button type="button" class="key" data-key="z" data-mode="text">z</button>
                    <button type="button" class="key" data-key="x" data-mode="text">x</button>
                    <button type="button" class="key" data-key="c" data-mode="text">c</button>
                    <button type="button" class="key" data-key="v" data-mode="text">v</button>
                    <button type="button" class="key" data-key="b" data-mode="text">b</button>
                    <button type="button" class="key" data-key="n" data-mode="text">n</button>
                    <button type="button" class="key" data-key="m" data-mode="text">m</button>
                    <button type="button" class="key key-wide" data-key="backspace">‚å´</button>
                </div>
                <div class="keyboard-row">
                    <button type="button" class="key key-special" data-key="√§" data-mode="text">√§</button>
                    <button type="button" class="key key-special" data-key="√∂" data-mode="text">√∂</button>
                    <button type="button" class="key key-special" data-key="√•" data-mode="text">√•</button>
                    <button type="button" class="key key-space" data-key="space">V√§lily√∂nti</button>
                    <button type="button" class="key key-action key-enter" data-key="enter">ENTER</button>
                </div>
            </div>

            <!-- Number Keyboard -->
            <div id="number-keyboard" class="keyboard number-keyboard">
                <div class="keyboard-row">
                    <button type="button" class="key" data-key="1" data-mode="number">1</button>
                    <button type="button" class="key" data-key="2" data-mode="number">2</button>
                    <button type="button" class="key" data-key="3" data-mode="number">3</button>
                </div>
                <div class="keyboard-row">
                    <button type="button" class="key" data-key="4" data-mode="number">4</button>
                    <button type="button" class="key" data-key="5" data-mode="number">5</button>
                    <button type="button" class="key" data-key="6" data-mode="number">6</button>
                </div>
                <div class="keyboard-row">
                    <button type="button" class="key" data-key="7" data-mode="number">7</button>
                    <button type="button" class="key" data-key="8" data-mode="number">8</button>
                    <button type="button" class="key" data-key="9" data-mode="number">9</button>
                </div>
                <div class="keyboard-row">
                    <button type="button" class="key key-action" data-key="clear">TYHJENN√Ñ</button>
                    <button type="button" class="key" data-key="0" data-mode="number">0</button>
                    <button type="button" class="key key-action key-enter" data-key="enter">ENTER</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script src="questions.js?v=6"></script>
    <script src="supabase.js?v=6"></script>
    <script src="keyboard.js?v=6"></script>
    <script src="app.js?v=6"></script>
</body>
</html>
